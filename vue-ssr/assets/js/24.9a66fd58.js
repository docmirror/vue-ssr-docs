(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{200:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),n("ul",[t._m(4),t._v(" "),t._m(5),t._v(" "),n("li",[n("p",[t._v("Извлечение общего CSS в отдельный файл.")]),t._v(" "),n("p",[t._v("Используется "),n("a",{attrs:{href:"https://github.com/webpack-contrib/extract-text-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("extract-text-webpack-plugin")]),n("OutboundLink")],1),t._v(" для извлечения CSS в основном (main) фрагменте в отдельный файл CSS (автоматически внедряемый с "),n("code",[t._v("template")]),t._v("), что позволяет кэшировать файл отдельно. Это рекомендуется, когда имеется много общего CSS.")]),t._v(" "),t._m(6)])]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),n("p",[t._v("Несколько вещей, которые нужно учитывать при импорте CSS из NPM-зависимостей:")]),t._v(" "),t._m(14),t._v(" "),t._m(15)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"управnение-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#управnение-css","aria-hidden":"true"}},[this._v("#")]),this._v(" Управление CSS")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Рекомендуемый способ управления CSS — просто использовать теги "),s("code",[this._v("<style>")]),this._v(" внутри однофайловых компонентов ("),s("code",[this._v("*.vue")]),this._v(" файлов), которые предоставляют:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Локальный CSS для компонентов")]),this._v(" "),s("li",[this._v("Возможность использования пре-процессоров или PostCSS")]),this._v(" "),s("li",[this._v("Горячую перезагрузку при разработке")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Что ещё более важно, загрузчик "),s("code",[this._v("vue-style-loader")]),this._v(", используемый внутри "),s("code",[this._v("vue-loader")]),this._v(", имеет некоторые особенности для серверного рендеринга:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("Единый код для клиента и сервера.")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("li",[n("p",[t._v("Автоматизация критического CSS при использовании "),n("code",[t._v("bundleRenderer")]),t._v(".")]),t._v(" "),n("p",[t._v("Если используется во время рендеринга на сервере, CSS компонента может быть собран и вставлен в HTML (автоматически обрабатывается при использовании опции "),n("code",[t._v("template")]),t._v("). На клиенте, когда компонент используется в первый раз, "),n("code",[t._v("vue-style-loader")]),t._v(" проверяет, есть ли уже встроенный сервером CSS для этого компонента, а если нет, CSS будет динамически встроен через тег "),n("code",[t._v("<style>")]),t._v(".")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("CSS внутри асинхронных компонентов остаётся встроенным в строки JavaScript и обрабатывается "),s("code",[this._v("vue-style-loader")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"настройка-извnечения-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#настройка-извnечения-css","aria-hidden":"true"}},[this._v("#")]),this._v(" Настройка извлечения CSS")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("Для извлечения CSS из "),n("code",[t._v("*.vue")]),t._v(" файлов в "),n("code",[t._v("vue-loader")]),t._v(" используется опция "),n("code",[t._v("extractCSS")]),t._v(" (требует "),n("code",[t._v("vue-loader")]),t._v(" 12.0.0+):")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// webpack.config.js")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ExtractTextPlugin "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'extract-text-webpack-plugin'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// извлечение CSS должно использоваться только в production")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// чтобы работала горячая замена на этапе разработки.")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isProduction "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  module"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.vue$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        loader"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vue-loader'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        options"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{attrs:{class:"token comment"}},[t._v("// включаем извлечение CSS")]),t._v("\n          extractCSS"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" isProduction\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" isProduction\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// убедитесь что добавили плагин!")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("ExtractTextPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'common.[chunkhash].css'")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Обратите внимание, что приведённая выше конфигурация применяется только к стилям в "),s("code",[this._v("*.vue")]),this._v(" файлах, но вы можете использовать "),s("code",[this._v('<style src="./foo.css">')]),this._v(" для импорта внешнего CSS в компоненты Vue.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Если вы хотите импортировать CSS из JavaScript, например "),s("code",[this._v("import 'foo.css'")]),this._v(", вам потребуется настроить соответствующие загрузчики:")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  module"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.css$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// важно: использовать vue-style-loader вместо style-loader")]),t._v("\n        use"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" isProduction\n          "),n("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" ExtractTextPlugin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("extract")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              use"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'css-loader'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n              fallback"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vue-style-loader'")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v("'vue-style-loader'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'css-loader'")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"импорт-стиnей-из-npm-зависимостей"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#импорт-стиnей-из-npm-зависимостей","aria-hidden":"true"}},[this._v("#")]),this._v(" Импорт стилей из NPM-зависимостей")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("p",[this._v("Он не должен быть указан внешней зависимостью в серверной сборке.")])]),this._v(" "),s("li",[s("p",[this._v("Если использовать извлечение CSS + извлечение из вендоров с помощью "),s("code",[this._v("CommonsChunkPlugin")]),this._v(", у "),s("code",[this._v("extract-text-webpack-plugin")]),this._v(" будут возникать проблемы, если извлекаемый CSS находится внутри извлечённого фрагмента вендоров. Чтобы обойти это, избегайте подключения CSS файлов в фрагменте для вендоров. Пример конфигурации Webpack для клиентской части:")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// обычное дело, извлекать зависимости в фрагмент для вендоров для лучшего кэширования.")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommonsChunkPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'vendor'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      minChunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// модуль извлекается в фрагмент для вендоров когда...")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),n("span",{attrs:{class:"token comment"}},[t._v("// он находится внутри node_modules")]),t._v("\n          "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("node_modules"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("test")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n          "),n("span",{attrs:{class:"token comment"}},[t._v("// и не извлекать если запрос является CSS файлом")]),t._v("\n          "),n("span",{attrs:{class:"token operator"}},[t._v("!")]),n("span",{attrs:{class:"token regex"}},[t._v("/\\.css$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("test")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// извлекает Webpack runtime & manifest")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommonsChunkPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'manifest'")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="css.md";s.default=e.exports}}]);